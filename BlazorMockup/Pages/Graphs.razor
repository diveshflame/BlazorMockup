@using BlazorMockup.ViewModel
@using BlazorMockup.DataWarehouse
@inject IDataStore DataStore

<MudTabs Elevation="2" Rounded="true" ApplyEffectsToContainer="true" PanelClass="pa-6">
    <MudTabPanel Text="Weight" @onclick="ShowWeightGraph">
        <BaseGraph ViewModel="@weightViewModel" />
    </MudTabPanel>
    <MudTabPanel Text="Height" @onclick="ShowHeightGraph">
        <BaseGraph ViewModel="@heightViewModel" />
    </MudTabPanel>
    <MudTabPanel Text="Tab Disabled" Disabled="true">
        <MudText>Content Disabled</MudText>
    </MudTabPanel>
</MudTabs>

@code {
    private GraphBase weightViewModel = new GraphBase
        {
            GraphType = "Weight"
        };

    private GraphBase heightViewModel = new GraphBase
        {
            GraphType = "Height"
        };

    private void ShowWeightGraph()
    {
        weightViewModel.LoadMeasurementsFromDataStore(DataStore); // Ensure data is loaded
        StateHasChanged(); // Trigger re-render
    }

    private void ShowHeightGraph()
    {
        heightViewModel.LoadMeasurementsFromDataStore(DataStore); // Ensure data is loaded
        StateHasChanged(); // Trigger re-render
    }
}